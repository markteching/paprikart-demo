import{a as Pe}from"./chunk-7ZAPRKAA.js";import{a as Ce}from"./chunk-RS65Q5L7.js";import{b as ae,c as Q,d as se,e as _e,f as B,g as H,h as le,i as ce,j as de,k as ue,l as pe,m as ge,r as me}from"./chunk-5QVFCI2M.js";import{b as ie,d as ne,e as k}from"./chunk-S3QMEJED.js";import{$ as p,$a as z,Gb as re,Ka as v,Kb as L,L as D,Ma as S,Na as te,Pa as O,Qa as $,Ra as C,Sa as P,Ta as s,Ua as i,Va as c,Wa as T,Xa as V,Ya as K,Za as R,_ as W,_a as X,aa as g,bb as h,cb as l,db as oe,eb as y,fb as M,h as Y,hb as b,ib as F,ja as ee,jb as A,kb as f,lb as x,mb as q,pb as j,ta as a,tb as w,ua as m,w as Z,za as N}from"./chunk-LAQZ4RC3.js";var Re=["cardCarouselPage"];function ye(r,_){if(r&1){let e=T();s(0,"div",3)(1,"button",8),h("click",function(){p(e);let o=l();return g(o.navToPrev());}),c(2,"i",9),i()();}}function ve(r,_){if(r&1&&(s(0,"div",10)(1,"div",11)(2,"div",12),c(3,"img",13),i(),s(4,"div",14)(5,"div",15)(6,"h5",16),f(7),i()()()(),s(8,"div",17)(9,"div",18)(10,"span",19),R(11,1),i(),c(12,"i",20),i()()()),r&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),x(e.productName);}}function Oe(r,_){if(r&1&&(s(0,"section",5,0),C(2,ve,13,5,"div",10,$),i()),r&2){let e=_.$implicit,t=l();M("id","",t.cardCarouselID,"-page-",e,""),a(2),P(t.cardsToPageMap==null?null:t.cardsToPageMap.get(e));}}function Me(r,_){if(r&1){let e=T();s(0,"div",6)(1,"button",8),h("click",function(){p(e);let o=l();return g(o.navToNext());}),c(2,"i",21),i()();}}function xe(r,_){if(r&1){let e=T();s(0,"li")(1,"label",23)(2,"input",24),h("click",function(){let o=p(e).$index,n=l(2);return g(n.navToIndex(o));}),i()()();}if(r&2){let e=_.$index,t=l(2);a(),M("for","",t.cardCarouselID,"-dotnav-",e,""),a(),M("id","",t.cardCarouselID,"-dotnav-",e,""),M("name","",t.cardCarouselID,"-dotnav-",e,""),M("value","",t.cardCarouselID,"-dotnav-",e,""),S("checked",t.currentPage==e);}}function be(r,_){if(r&1&&(s(0,"section",7)(1,"ol",22),C(2,xe,3,13,"li",null,$),i()()),r&2){let e=l();a(2),P(e.pageIndexArray);}}var he=(()=>{class r{constructor(e,t){this.elRef=e,this.cdr=t,this.uniqueID="example",this.cardsPerPage=3,this.cards=[{productName:"test",barcode:"1234"}],this.showOnlyFullPages=!1,this.maxPageCount=0,this.cardCarouselID=void 0,this.currentPage=0,this.pageCount=0,this.touchStartX=0,this.touchEndX=0;}ngOnInit(){this.cardCarouselID=`cardCarousel-${this.uniqueID}`,this.createSliderGroups();let e=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");e.addEventListener("touchstart",t=>this.onTouchStart(t),{passive:!0}),e.addEventListener("touchend",t=>this.onTouchEnd(t),{passive:!0});}ngOnChanges(e){e.cardsPerPage&&this.createSliderGroups();}get carouselItemFlexBasis(){return`calc(100% / ${this.cardsPerPage})`;}createSliderGroups(){this.setPageCount(),this.cardsToPageMap=new Map();let e=0,t;this.pageCount>0?this.maxPageCount>0&&this.maxPageCount<this.pageCount?t=this.maxPageCount*this.cardsPerPage:t=this.pageCount*this.cardsPerPage:t=this.cards.length;for(let o=0;o<t;o+=this.cardsPerPage){let n=this.cards.slice(o,o+this.cardsPerPage);this.cardsToPageMap.set(e,n),e++;}this.pageIndexArray=Array.from(this.cardsToPageMap.keys());}setPageCount(){this.showOnlyFullPages?this.pageCount=Math.floor(this.cards.length/this.cardsPerPage):this.pageCount=Math.ceil(this.cards.length/this.cardsPerPage);}smoothScrollToPosition(e,t,o=500){let n=e.scrollLeft,d=window.getComputedStyle(e),E=parseFloat(d.getPropertyValue("scroll-padding-inline-start"))||0,I=t-E-n,u=performance.now(),J=Ee=>{let Se=Ee-u,U=Math.min(Se/o,1),Te=U*(2-U);e.scrollLeft=n+I*Te,U<1&&requestAnimationFrame(J);};requestAnimationFrame(J);}navigateToGroup(e){let t=this.cardCarouselPages?.find((n,d)=>d===e)?.nativeElement,o=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");t&&(o?this.smoothScrollToPosition(o,t.offsetLeft):(console.error("Failed to detected the related scroller element, so smooth scrolling is unavailable."),t.scrollIntoView({block:"nearest",inline:"nearest"})));}navToNext(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==e?(this.currentPage=0,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage+1,this.navigateToGroup(this.currentPage));}navToPrev(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==0?(this.currentPage=e,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage-1,this.navigateToGroup(this.currentPage));}navToIndex(e){this.currentPage=e,this.navigateToGroup(this.currentPage);}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX;}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipeGesture();}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX;this.pageCount>1&&(e>50&&this.currentPage>=1?this.navToPrev():e<-50&&this.navToNext(),this.cdr.markForCheck());}scrollToTop(){window.scrollTo({top:0,behavior:"instant"});}static{this.ɵfac=function(t){return new(t||r)(m(ee),m(w));};}static{this.ɵcmp=N({type:r,selectors:[["app-card-carousel"]],viewQuery:function(t,o){if(t&1&&b(Re,5),t&2){let n;F(n=A())&&(o.cardCarouselPages=n);}},hostVars:2,hostBindings:function(t,o){t&2&&te("--cardCarousel-item-basis",o.carouselItemFlexBasis);},inputs:{uniqueID:"uniqueID",cardsPerPage:"cardsPerPage",cards:"cards",showOnlyFullPages:"showOnlyFullPages",maxPageCount:"maxPageCount"},features:[W],decls:7,vars:6,consts:()=>{let e;e="term\xE9kfot\xF3";let t;return t="R\xE9szletek",[["cardCarouselPage",""],t,[1,"cardCarousel",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--previous"],[1,"cardCarousel__scroller","pb-4","pt-2",3,"id"],[1,"cardCarousel__page","justify-content-center",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--next"],[1,"dotNav","d-block","col-10","col-sm-6","col-xl-4","col-xxl-3","mx-auto"],[1,"btn","h-100",2,"border","none",3,"click"],["aria-hidden","true",1,"bi","bi-chevron-left","fs-1"],[1,"card","shadow","cardCarousel__item","h-100",2,"cursor","pointer",3,"routerLink"],[1,"row","g-0","h-100","text-center"],[1,"col-sm-4","my-auto"],["width","500","height","625","alt",e,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body","text-center"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary","w-100"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"],["aria-hidden","true",1,"bi","bi-chevron-right","fs-1"],[1,"d-flex","column-gap-4","text-center","p-0","m-0"],[3,"for"],["type","radio",3,"click","id","name","value","checked"]];},template:function(t,o){t&1&&(s(0,"div",2),v(1,ye,3,0,"div",3),s(2,"div",4),C(3,Oe,4,3,"section",5,$),i(),v(5,Me,3,0,"div",6),i(),v(6,be,4,0,"section",7)),t&2&&(S("id",o.cardCarouselID),a(),O(o.pageCount>1&&o.currentPage!=0?1:-1),a(),y("id","",o.cardCarouselID,"-scroller"),a(),P(o.pageIndexArray),a(2),O(o.pageCount>1?5:-1),a(),O(o.pageCount>1?6:-1));},dependencies:[k,L],styles:[".cardCarousel[_ngcontent-%COMP%]{position:relative}.cardCarousel__scroller[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;overflow-x:hidden;grid-auto-columns:100%;padding:0 3.25rem;scroll-padding-inline:3.25rem;max-width:100vw}.cardCarousel__page[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;min-height:20vh}.cardCarousel__item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-basis:var(--cardCarousel-item-basis);margin:0 .25rem;min-height:100%}@media (hover: hover){.cardCarousel__item[_ngcontent-%COMP%]:hover{transform:scale(1.025);border:1px solid var(--bs-dark)}}.cardCarousel__btn-container[_ngcontent-%COMP%]{width:3rem;display:flex;justify-content:center;align-items:center;position:absolute;z-index:1}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:var(--bs-dark)}.cardCarousel__btn-container--next[_ngcontent-%COMP%]{top:0;bottom:0;right:0}.cardCarousel__btn-container--previous[_ngcontent-%COMP%]{left:0;top:0;bottom:0}ol[_ngcontent-%COMP%]{font-size:0;list-style:none}li[_ngcontent-%COMP%]{background:var(--bs-secondary-bg);border-radius:50cqh;transition:flex .5s;flex:0 auto}li[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{cursor:pointer}li[_ngcontent-%COMP%]:has(input:checked){flex:1 auto;background:var(--bs-dark)}label[_ngcontent-%COMP%]{display:inline-block;line-height:1em;min-width:1em}input[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});}}return r;})();var Fe=["productFilterModal"],Ae=["productNameFilterInput"],Ie=(r,_)=>["filterCategory-{{productCategory.categoryPath}}"],De=(r,_)=>["searchSuggestion-{{product.barcode}}"],Ne=(r,_)=>["category-{{productCategory.categoryPath}}"],$e=(r,_)=>["productCard-{{product.barcode}}"],we=()=>({"min-height":"40vh","max-height":"40vh"}),Le=()=>({});function ke(r,_){if(r&1&&(s(0,"option",19),f(1),i()),r&2){let e=_.$implicit;oe("value",e.categoryPath),a(),x(e.categoryName);}}function Ge(r,_){if(r&1){let e=T();s(0,"tr")(1,"td",31),h("click",function(){let o=p(e).$implicit,n=l();return g(n.selectProduct(o.barcode));}),f(2),i()();}if(r&2){let e=_.$implicit;a(2),x(e.productName);}}function Ue(r,_){if(r&1){let e=T();s(0,"h1",32),f(1),i(),c(2,"app-card-carousel",33),s(3,"div",34)(4,"button",35),h("click",function(){p(e);let o=l().$implicit,n=l();return g(n.selectCategory(o.categoryPath));}),V(5,6),c(6,"span",36),K(),i()();}if(r&2){let e=l().$implicit,t=l();a(),q(" ",e.categoryName," "),a(),S("uniqueID",e.categoryPath)("cardsPerPage",t.cardCount)("cards",t.categoryToProductsMap[e.categoryPath])("showOnlyFullPages",!1)("maxPageCount",6),a(4),X(t.categoryToProductsMap[e.categoryPath].length),z(5);}}function Ve(r,_){if(r&1&&(s(0,"div",38)(1,"div",39)(2,"div",40),c(3,"img",41),i(),s(4,"div",42)(5,"div",43)(6,"h5",44),f(7),i()()()(),s(8,"div",45)(9,"div",46)(10,"span",47),R(11,7),i(),c(12,"i",48),i()()()),r&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),x(e.productName);}}function Ke(r,_){if(r&1&&(s(0,"h1",11),f(1),i(),s(2,"div",37),C(3,Ve,13,5,"div",38,$e),i()),r&2){let e=l().$implicit,t=l();a(),q(" ",e.categoryName," "),a(2),P(t.categoryToProductsMap[e.categoryPath]);}}function Xe(r,_){if(r&1&&v(0,Ue,7,7)(1,Ke,5,1),r&2){let e=_.$implicit,t=l();O(t.selectedCategory?t.selectedCategory==e.categoryPath?1:-1:0);}}var ot=(()=>{class r{constructor(e,t,o,n,d){this.route=e,this.router=t,this.productHandler=o,this.windowListener=n,this.cdr=d,this.cardCount=1,this.isFullScreenModal=!1,this.unsubscribe$=new Y(),this.selectedCategory=null,this.productCategories=[],this.products=[],this.categoryToProductsMap={milled_products:[],wet_seasoning:[],aromas:[],pasta:[]},this.productFilter=new B({productName:new H("",Q.required)}),this.productCategoryFilter=new B({productCategory:new H("",Q.required)}),this.filteredProducts=[];}ngOnInit(){this.setCardCount(window.innerWidth),this.initProductVars(),this.windowListener.$onResize.pipe(D(this.unsubscribe$)).subscribe(e=>{this.setCardCount(e.width),this.setIsFullScreenModal(e.width),this.cdr.markForCheck();}),this.route.queryParamMap.pipe(D(this.unsubscribe$)).subscribe(e=>{let t=e.get("category");t?this.productCategories.some(n=>n.categoryPath===t)?this.selectedCategory=t:(console.error("Redirected to the default 'products' page as an invalid product category was supplied as query parameter:",t),this.router.navigate(["/products"])):this.selectedCategory=null,this.cdr.markForCheck();});}ngAfterViewInit(){this.productFilterModal?Z(this.productFilterModal.nativeElement,"shown.bs.modal").pipe(D(this.unsubscribe$)).subscribe(()=>{this.productNameFilterInput.nativeElement.focus();}):console.error("Failed to focus on the filter search, this.productFilterModal is",this.productFilterModal);}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete();}initProductVars(){this.productCategories=this.productHandler.getProductCategories(),Object.keys(this.categoryToProductsMap).forEach(e=>{this.categoryToProductsMap[e]=this.productHandler.getProductsOfCategory(e);}),this.products=Object.values(this.categoryToProductsMap).flat();}onSearch(e){let t=e.target.value.toLowerCase();t?this.filteredProducts=this.products.filter(o=>o.productName.toLowerCase().includes(t)):this.filteredProducts=[];}selectProduct(e){this.router.navigate(["/product/",e]),this.resetFilter();}selectCategoryFromDropdown(e){let o=e.target.value;this.router.navigate(["/products"],{queryParams:o?{category:o}:{}}),window.scrollTo({top:0,behavior:"instant"});}selectCategory(e){this.router.navigate(["/products"],{queryParams:e?{category:e}:{}}),window.scrollTo({top:0,behavior:"instant"});let t=document.getElementById("productCategory");t&&(t.value=e);}setCardCount(e){e<768?this.cardCount=1:e<1200?this.cardCount=2:e<1600?this.cardCount=3:e>=1600&&(this.cardCount=4);}setIsFullScreenModal(e){this.isFullScreenModal=e>576;}resetFilter(){this.filteredProducts=[],this.productCategoryFilter.reset({productCategory:""});}static{this.ɵfac=function(t){return new(t||r)(m(ie),m(ne),m(Ce),m(Pe),m(w));};}static{this.ɵcmp=N({type:r,selectors:[["app-products"]],viewQuery:function(t,o){if(t&1&&(b(Fe,5),b(Ae,5)),t&2){let n;F(n=A())&&(o.productFilterModal=n.first),F(n=A())&&(o.productNameFilterInput=n.first);}},decls:39,vars:6,consts:()=>{let e;e="Term\xE9k neve...";let t;t="Term\xE9kk\xEDn\xE1lat sz\u0171k\xEDt\xE9se";let o;o=" Term\xE9k keres\xE9se... ";let n;n="Term\xE9kkateg\xF3ria v\xE1laszt\xE1sa...";let d;d=""+"\uFFFD#35\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#35\uFFFD"+" tal\xE1lat";let E;E=" Kateg\xF3ria \xF6sszes term\xE9k\xE9nek megtekint\xE9se "+"\uFFFD#6\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#6\uFFFD"+"";let G;G="term\xE9kfot\xF3";let I;return I="R\xE9szletek",[["productFilterModal",""],["productNameFilterInput",""],t,o,n,d,E,I,["id","productsCover",1,"diagonal-cover","diagonal-cover-start","text-center","text-light"],[1,"my-4","col-11","mx-auto"],[1,"col-11","col-sm-10","col-md-8","col-lg-6","col-xxl-4","mb-xxl-5","mx-auto"],[1,"mb-3"],[1,"position-relative"],["type","button","data-bs-toggle","modal","data-bs-target","#productFilterModal",1,"btn","btn-outline-light","w-100"],[1,"bi","bi-search","position-absolute","top-50","start-0","translate-middle-y","ms-3"],[3,"formGroup"],["id","productCategoryFilter",1,"mb-3"],["id","productCategory","aria-label","Product category filter","formControlName","productCategory","name","productCategory",1,"form-select","form-select","mb-3","text-center",3,"change"],["value","","selected",""],[3,"value"],["id","productFilterModal","data-bs-backdrop","true","data-bs-keyboard","true","tabindex","-1","aria-labelledby","productFilterModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-fullscreen-sm-down","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"flex-grow-1","position-relative"],["id","productNameFilterInput","aria-label","Product name search","formControlName","productName","name","productNameFilterInput","placeholder",e,"autocomplete","off",1,"form-control","text-center",3,"input"],["type","button text-dark","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0","overflow-y-auto",3,"ngStyle"],["id","filteredProducts",1,"table","table-hover","table-striped"],[1,"modal-footer"],[1,"col-11","col-lg-10","mx-auto"],["data-bs-dismiss","modal",3,"click"],[1,"my-4"],[3,"uniqueID","cardsPerPage","cards","showOnlyFullPages","maxPageCount"],[1,"d-block","my-5","mx-auto","text-center"],[1,"btn","btn-lg","btn-outline-dark","col-10","col-xl-6","col-xxl-5",3,"click"],[1,"badge","text-bg-dark","ms-2"],[1,"d-flex","justify-content-center","flex-wrap"],[1,"card","m-3","shadow",2,"flex","1 1 300px","min-height","200px",3,"routerLink"],[1,"row","g-0","h-100"],[1,"col-sm-4","my-auto","text-center"],["width","500","height","625","alt",G,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"]];},template:function(t,o){if(t&1){let n=T();s(0,"div",8)(1,"h1",9),R(2,2),i(),s(3,"div",10)(4,"div",11)(5,"div",12)(6,"button",13),R(7,3),i(),c(8,"span",14),i()(),s(9,"form",15)(10,"div",16)(11,"select",17),h("change",function(E){return p(n),g(o.selectCategoryFromDropdown(E));}),s(12,"option",18),R(13,4),i(),C(14,ke,2,2,"option",19,Ie),i()()()()(),s(16,"form",15)(17,"div",20,0)(19,"div",21)(20,"div",22)(21,"div",23)(22,"div",24)(23,"input",25,1),h("input",function(E){return p(n),g(o.onSearch(E));}),i(),c(25,"span",14),i(),c(26,"button",26),i(),s(27,"div",27)(28,"table",28)(29,"tbody"),C(30,Ge,3,1,"tr",null,De),i()()(),s(32,"div",29)(33,"p"),V(34,5),c(35,"strong"),K(),i()()()()()(),s(36,"div",30),C(37,Xe,2,1,null,null,Ne),i();}t&2&&(a(9),S("formGroup",o.productCategoryFilter),a(5),P(o.productCategories),a(2),S("formGroup",o.productFilter),a(11),S("ngStyle",o.isFullScreenModal?j(4,we):j(5,Le)),a(3),P(o.filteredProducts),a(5),X(o.filteredProducts.length),z(34),a(2),P(o.productCategories));},dependencies:[me,le,pe,ge,ae,ue,se,_e,ce,de,k,re,he,L],styles:[".form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem var(--bs-light)!important;border-color:var(--bs-dark)!important}.form-select[_ngcontent-%COMP%]{background-size:20px}@media (min-width: 1600px){.col-xxxl-3[_ngcontent-%COMP%]{flex:0 0 auto;width:25%}}"],changeDetection:0});}}return r;})();export{ot as ProductsComponent};/**i18n:0a33dba5d939e6258947ccdd4e778b80a75bc1ad4f87c319dff7344efb1f42c6*/