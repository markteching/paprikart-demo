import{a as Re}from"./chunk-NHVZILJQ.js";import{a as fe}from"./chunk-XTYJWAQV.js";import{b as ue,c as H,d as pe,e as ge,f as W,g as J,h as me,i as Ce,j as Pe,k as he,l as Ee,m as Se,r as Te}from"./chunk-KQ2SAFIS.js";import{b as de}from"./chunk-47XNIFCZ.js";import{c as _e,f as Q,g as B,i as ce,k as le}from"./chunk-6WKBRUJT.js";import{c as ae,e as se,f as L}from"./chunk-5BOYRTTB.js";import{$ as te,$a as C,Ea as N,Lb as ne,M as D,Pa as v,Pb as $,Ra as m,Sa as oe,Ua as x,Va as w,Wa as E,Xa as S,Ya as n,Za as i,_a as l,aa as d,ab as V,ba as u,bb as K,cb as R,db as X,eb as z,gb as p,hb as c,i as Z,ib as ie,jb as y,kb as O,la as re,mb as b,nb as F,ob as I,pb as f,qb as M,rb as q,ub as j,x as ee,xa as a,ya as h,yb as k}from"./chunk-IM4RQOL6.js";var be=["cardCarouselPage"];function Fe(o,_){if(o&1){let e=C();n(0,"div",8),p("click",function(){d(e);let r=c();return u(r.navToPrev());}),l(1,"button",9),i();}}function Ie(o,_){if(o&1){let e=C();n(0,"div",11),p("click",function(){d(e);let r=c(2);return u(r.scrollToTop());}),n(1,"div",12)(2,"div",13),l(3,"img",14),i(),n(4,"div",15)(5,"div",16)(6,"h5",17),f(7),i()()()(),n(8,"div",18)(9,"div",19)(10,"span",20),R(11,1),i(),l(12,"i",21),i()()();}if(o&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),M(e.productName);}}function Ae(o,_){if(o&1&&(n(0,"section",5,0),E(2,Ie,13,5,"div",10,w),i()),o&2){let e=_.$implicit,t=c();O("id","",t.cardCarouselID,"-page-",e,""),a(2),S(t.cardsToPageMap==null?null:t.cardsToPageMap.get(e));}}function De(o,_){if(o&1){let e=C();n(0,"div",22),p("click",function(){d(e);let r=c();return u(r.navToNext());}),l(1,"button",23),i();}}function Ne(o,_){if(o&1){let e=C();n(0,"li")(1,"label",25)(2,"input",26),p("click",function(){let r=d(e).$index,s=c(2);return u(s.navToIndex(r));}),i()()();}if(o&2){let e=_.$index,t=c(2);a(),O("for","",t.cardCarouselID,"-dotnav-",e,""),a(),O("id","",t.cardCarouselID,"-dotnav-",e,""),O("name","",t.cardCarouselID,"-dotnav-",e,""),O("value","",t.cardCarouselID,"-dotnav-",e,""),m("checked",t.currentPage==e);}}function we(o,_){if(o&1&&(n(0,"section",7)(1,"ol",24),E(2,Ne,3,13,"li",null,w),i()()),o&2){let e=c();a(2),S(e.pageIndexArray);}}var ye=(()=>{class o{constructor(e,t){this.elRef=e,this.cdr=t,this.uniqueID="example",this.cardsPerPage=3,this.cards=[{productName:"test",barcode:"1234"}],this.showOnlyFullPages=!1,this.maxPageCount=0,this.cardCarouselID=void 0,this.currentPage=0,this.pageCount=0,this.touchStartX=0,this.touchEndX=0;}ngOnInit(){this.cardCarouselID=`cardCarousel-${this.uniqueID}`,this.createSliderGroups();let e=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");e.addEventListener("touchstart",t=>this.onTouchStart(t),{passive:!0}),e.addEventListener("touchend",t=>this.onTouchEnd(t),{passive:!0});}ngOnChanges(e){e.cardsPerPage&&this.createSliderGroups();}get carouselItemFlexBasis(){return`calc(100% / ${this.cardsPerPage})`;}createSliderGroups(){this.setPageCount(),this.cardsToPageMap=new Map();let e=0,t;this.pageCount>0?this.maxPageCount>0&&this.maxPageCount<this.pageCount?t=this.maxPageCount*this.cardsPerPage:t=this.pageCount*this.cardsPerPage:t=this.cards.length;for(let r=0;r<t;r+=this.cardsPerPage){let s=this.cards.slice(r,r+this.cardsPerPage);this.cardsToPageMap.set(e,s),e++;}this.pageIndexArray=Array.from(this.cardsToPageMap.keys());}setPageCount(){this.showOnlyFullPages?this.pageCount=Math.floor(this.cards.length/this.cardsPerPage):this.pageCount=Math.ceil(this.cards.length/this.cardsPerPage);}smoothScrollToPosition(e,t,r=500){let s=e.scrollLeft,g=window.getComputedStyle(e),T=parseFloat(g.getPropertyValue("scroll-padding-inline-start"))||0,A=t-T-s,P=performance.now(),Y=ve=>{let xe=ve-P,U=Math.min(xe/r,1),Oe=U*(2-U);e.scrollLeft=s+A*Oe,U<1&&requestAnimationFrame(Y);};requestAnimationFrame(Y);}navigateToGroup(e){let t=this.cardCarouselPages?.find((s,g)=>g===e)?.nativeElement,r=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");t&&(r?this.smoothScrollToPosition(r,t.offsetLeft):(console.error("Failed to detected the related scroller element, so smooth scrolling is unavailable."),t.scrollIntoView({block:"nearest",inline:"nearest"})));}navToNext(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==e?(this.currentPage=0,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage+1,this.navigateToGroup(this.currentPage));}navToPrev(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==0?(this.currentPage=e,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage-1,this.navigateToGroup(this.currentPage));}navToIndex(e){this.currentPage=e,this.navigateToGroup(this.currentPage);}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX;}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipeGesture();}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX;this.pageCount>1&&(e>50&&this.currentPage>=1?this.navToPrev():e<-50&&this.navToNext(),this.cdr.markForCheck());}scrollToTop(){window.scrollTo({top:0,behavior:"instant"});}static{this.ɵfac=function(t){return new(t||o)(h(re),h(k));};}static{this.ɵcmp=N({type:o,selectors:[["app-card-carousel"]],viewQuery:function(t,r){if(t&1&&b(be,5),t&2){let s;F(s=I())&&(r.cardCarouselPages=s);}},hostVars:2,hostBindings:function(t,r){t&2&&oe("--cardCarousel-item-basis",r.carouselItemFlexBasis);},inputs:{uniqueID:"uniqueID",cardsPerPage:"cardsPerPage",cards:"cards",showOnlyFullPages:"showOnlyFullPages",maxPageCount:"maxPageCount"},features:[te],decls:7,vars:6,consts:()=>{let e;e="term\xE9kfot\xF3";let t;return t="R\xE9szletek",[["cardCarouselPage",""],t,[1,"cardCarousel",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--previous"],[1,"cardCarousel__scroller","pb-4","pt-2",3,"id"],[1,"cardCarousel__page","justify-content-center",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--next"],[1,"dotNav","d-block","col-10","col-sm-6","col-xl-4","col-xxl-3","mx-auto"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--previous",3,"click"],["aria-hidden","true",1,"btn","p-0","bi","bi-chevron-left","fs-1",2,"border","none"],[1,"card","shadow","cardCarousel__item","h-100",2,"cursor","pointer",3,"routerLink"],[1,"card","shadow","cardCarousel__item","h-100",2,"cursor","pointer",3,"click","routerLink"],[1,"row","g-0","h-100","text-center"],[1,"col-sm-4","my-auto"],["width","500","height","625","alt",e,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body","text-center"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary","w-100"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--next",3,"click"],["aria-hidden","true",1,"btn","p-0","bi","bi-chevron-right","fs-1",2,"border","none"],[1,"d-flex","column-gap-4","text-center","p-0","m-0"],[3,"for"],["type","radio",3,"click","id","name","value","checked"]];},template:function(t,r){t&1&&(n(0,"div",2),v(1,Fe,2,0,"div",3),n(2,"div",4),E(3,Ae,4,3,"section",5,w),i(),v(5,De,2,0,"div",6),i(),v(6,we,4,0,"section",7)),t&2&&(m("id",r.cardCarouselID),a(),x(r.pageCount>1&&r.currentPage!=0?1:-1),a(),y("id","",r.cardCarouselID,"-scroller"),a(),S(r.pageIndexArray),a(2),x(r.pageCount>1?5:-1),a(),x(r.pageCount>1?6:-1));},dependencies:[L,$],styles:[".cardCarousel[_ngcontent-%COMP%]{position:relative}.cardCarousel__scroller[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;overflow-x:hidden;grid-auto-columns:100%;padding:0 3.25rem;scroll-padding-inline:3.25rem;max-width:100vw}.cardCarousel__page[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;min-height:20vh}.cardCarousel__item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-basis:var(--cardCarousel-item-basis);margin:0 .25rem;min-height:100%}@media (hover: hover){.cardCarousel__item[_ngcontent-%COMP%]:hover{transform:scale(1.025);border:1px solid var(--bs-dark)}}.cardCarousel__btn-container[_ngcontent-%COMP%]{width:3rem;display:flex;justify-content:center;align-items:center;position:absolute;z-index:1;cursor:pointer}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:var(--bs-dark)}.cardCarousel__btn-container--next[_ngcontent-%COMP%]{top:0;bottom:0;right:0}.cardCarousel__btn-container--previous[_ngcontent-%COMP%]{left:0;top:0;bottom:0}ol[_ngcontent-%COMP%]{font-size:0;list-style:none}li[_ngcontent-%COMP%]{background:var(--bs-secondary-bg);border-radius:50cqh;transition:flex .5s;flex:0 auto}li[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{cursor:pointer}li[_ngcontent-%COMP%]:has(input:checked){flex:1 auto;background:var(--bs-dark)}label[_ngcontent-%COMP%]{display:inline-block;line-height:1em;min-width:1em}input[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});}}return o;})();var ke=["productFilterModal"],$e=["productNameFilterInput"],Le=(o,_)=>["filterCategory-{{productCategory.categoryPath}}"],Ge=(o,_)=>["searchSuggestion-{{product.barcode}}"],Ue=(o,_)=>["category-{{productCategory.categoryPath}}"],Ve=(o,_)=>["productCard-{{product.barcode}}"],Ke=()=>({"min-height":"40vh","max-height":"40vh"}),Xe=()=>({});function ze(o,_){if(o&1&&(n(0,"option",20),f(1),i()),o&2){let e=_.$implicit;ie("value",e.categoryPath),a(),M(e.categoryName);}}function qe(o,_){if(o&1){let e=C();n(0,"tr")(1,"td",32),p("click",function(){let r=d(e).$implicit,s=c();return u(s.selectProduct(r.barcode));}),f(2),i()();}if(o&2){let e=_.$implicit;a(2),M(e.productName);}}function je(o,_){if(o&1){let e=C();n(0,"div",null,2)(2,"h1",33),f(3),i(),l(4,"app-card-carousel",34),n(5,"div",35)(6,"button",36),p("click",function(){d(e);let r=c().$implicit,s=c();return u(s.selectCategory(r.categoryPath));}),V(7,7),l(8,"span",37),K(),i()()();}if(o&2){let e=c().$implicit,t=c();m("@fadeInUp",!0),a(3),q(" ",e.categoryName," "),a(),m("uniqueID",e.categoryPath)("cardsPerPage",t.cardCount)("cards",t.categoryToProductsMap[e.categoryPath])("showOnlyFullPages",!1)("maxPageCount",6),a(4),X(t.categoryToProductsMap[e.categoryPath].length),z(7);}}function Qe(o,_){if(o&1){let e=C();n(0,"div",40),p("click",function(){d(e);let r=c(3);return u(r.scrollToTop());}),n(1,"div",41)(2,"div",42),l(3,"img",43),i(),n(4,"div",44)(5,"div",45)(6,"h5",46),f(7),i()()()(),n(8,"div",47)(9,"div",48)(10,"span",49),R(11,8),i(),l(12,"i",50),i()()();}if(o&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),M(e.productName);}}function Be(o,_){if(o&1&&(n(0,"h1",12),f(1),i(),n(2,"div",38,2),E(4,Qe,13,5,"div",39,Ve),i()),o&2){let e=c().$implicit,t=c();a(),q(" ",e.categoryName," "),a(),m("@fadeInUp",!0),a(2),S(t.categoryToProductsMap[e.categoryPath]);}}function He(o,_){if(o&1&&v(0,je,9,8,"div")(1,Be,6,2),o&2){let e=_.$implicit,t=c();x(t.selectedCategory?t.selectedCategory==e.categoryPath?1:-1:0);}}var lt=(()=>{class o{constructor(e,t,r,s,g){this.route=e,this.router=t,this.productHandler=r,this.windowListener=s,this.cdr=g,this.cardCount=1,this.isWideScreenModal=!1,this.unsubscribe$=new Z(),this.selectedCategory=null,this.productCategories=[],this.products=[],this.isInViewStates=[],this.categoryToProductsMap={milled_products:[],wet_seasoning:[],aromas:[],pasta:[]},this.productFilter=new W({productName:new J("",H.required)}),this.productCategoryFilter=new W({productCategory:new J("",H.required)}),this.filteredProducts=[];}ngOnInit(){this.setCardCount(window.innerWidth),this.initProductVars(),this.windowListener.$onResize.pipe(D(this.unsubscribe$)).subscribe(e=>{this.setCardCount(e.width),this.setIsWideScreenModal(e.width),this.cdr.markForCheck();}),this.route.queryParamMap.pipe(D(this.unsubscribe$)).subscribe(e=>{let t=e.get("category");t?this.productCategories.some(s=>s.categoryPath===t)?this.selectedCategory=t:(console.error("Redirected to the default 'products' page as an invalid product category was supplied as query parameter:",t),this.router.navigate(["/products"])):this.selectedCategory=null,this.cdr.markForCheck();});}ngAfterViewInit(){this.productFilterModal?ee(this.productFilterModal.nativeElement,"shown.bs.modal").pipe(D(this.unsubscribe$)).subscribe(()=>{this.productNameFilterInput.nativeElement.focus();}):console.error("Failed to focus on the filter search, this.productFilterModal is",this.productFilterModal);}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete();}initProductVars(){this.productCategories=this.productHandler.getProductCategories(),Object.keys(this.categoryToProductsMap).forEach(e=>{this.categoryToProductsMap[e]=this.productHandler.getProductsOfCategory(e);}),this.products=Object.values(this.categoryToProductsMap).flat();}onSearch(e){let t=e.target.value.toLowerCase();t?this.filteredProducts=this.products.filter(r=>r.productName.toLowerCase().includes(t)):this.filteredProducts=[];}selectProduct(e){this.router.navigate(["/product/",e]),this.resetFilter();}selectCategoryFromDropdown(e){let r=e.target.value;this.router.navigate(["/products"],{queryParams:r?{category:r}:{}}),this.scrollToTop();}selectCategory(e){this.router.navigate(["/products"],{queryParams:e?{category:e}:{}}),this.scrollToTop();let t=document.getElementById("productCategory");t&&(t.value=e);}setCardCount(e){e<768?this.cardCount=1:e<1200?this.cardCount=2:e<1600?this.cardCount=3:e>=1600&&(this.cardCount=4);}setIsWideScreenModal(e){this.isWideScreenModal=e>576;}resetFilter(){this.filteredProducts=[],this.productCategoryFilter.reset({productCategory:""});}scrollToTop(){window.scrollTo({top:0,behavior:"instant"});}static{this.ɵfac=function(t){return new(t||o)(h(ae),h(se),h(fe),h(Re),h(k));};}static{this.ɵcmp=N({type:o,selectors:[["app-products"]],viewQuery:function(t,r){if(t&1&&(b(ke,5),b($e,5)),t&2){let s;F(s=I())&&(r.productFilterModal=s.first),F(s=I())&&(r.productNameFilterInput=s.first);}},decls:39,vars:6,consts:()=>{let e;e="Term\xE9k neve...";let t;t="Term\xE9kk\xEDn\xE1lat sz\u0171k\xEDt\xE9se";let r;r=" Term\xE9k keres\xE9se... ";let s;s="Term\xE9kkateg\xF3ria v\xE1laszt\xE1sa...";let g;g=""+"\uFFFD#35\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#35\uFFFD"+" tal\xE1lat";let T;T=" Kateg\xF3ria \xF6sszes term\xE9k\xE9nek megtekint\xE9se "+"\uFFFD#8\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#8\uFFFD"+"";let G;G="term\xE9kfot\xF3";let A;return A="R\xE9szletek",[["productFilterModal",""],["productNameFilterInput",""],["animateElements",""],t,r,s,g,T,A,["id","productsCover",1,"diagonal-cover","diagonal-cover-start","text-center","text-light"],[1,"my-4","col-11","mx-auto"],[1,"col-11","col-sm-10","col-md-8","col-lg-6","col-xxl-4","mb-xxl-5","mx-auto"],[1,"mb-3"],[1,"position-relative"],["type","button","data-bs-toggle","modal","data-bs-target","#productFilterModal",1,"btn","btn-outline-light","w-100"],[1,"bi","bi-search","position-absolute","top-50","start-0","translate-middle-y","ms-3"],[3,"formGroup"],["id","productCategoryFilter",1,"mb-3"],["id","productCategory","aria-label","Product category filter","formControlName","productCategory","name","productCategory",1,"form-select","form-select","mb-3","text-center",3,"change"],["value","","selected",""],[3,"value"],["id","productFilterModal","data-bs-backdrop","true","data-bs-keyboard","true","tabindex","-1","aria-labelledby","productFilterModalLabel","aria-hidden","true",1,"modal"],[1,"modal-dialog","modal-fullscreen-sm-down","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"flex-grow-1","position-relative"],["id","productNameFilterInput","aria-label","Product name search","formControlName","productName","name","productNameFilterInput","placeholder",e,"autocomplete","off",1,"form-control","text-center",3,"input"],["type","button text-dark","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0","overflow-y-auto",3,"ngStyle"],["id","filteredProducts",1,"table","table-hover","table-striped"],[1,"modal-footer"],[1,"col-11","col-lg-10","mx-auto"],["data-bs-dismiss","modal",3,"click"],[1,"my-4"],[3,"uniqueID","cardsPerPage","cards","showOnlyFullPages","maxPageCount"],[1,"d-block","my-5","mx-auto","text-center"],[1,"btn","btn-lg","btn-outline-dark","col-10","col-xl-6","col-xxl-5",3,"click"],[1,"badge","text-bg-dark","ms-2"],[1,"d-flex","justify-content-center","flex-wrap"],[1,"card","m-3","shadow",2,"flex","1 1 300px","min-height","200px",3,"routerLink"],[1,"card","m-3","shadow",2,"flex","1 1 300px","min-height","200px",3,"click","routerLink"],[1,"row","g-0","h-100"],[1,"col-sm-4","my-auto","text-center"],["width","500","height","625","alt",G,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"]];},template:function(t,r){if(t&1){let s=C();n(0,"div",9)(1,"h1",10),R(2,3),i(),n(3,"div",11)(4,"div",12)(5,"div",13)(6,"button",14),R(7,4),i(),l(8,"span",15),i()(),n(9,"form",16)(10,"div",17)(11,"select",18),p("change",function(T){return d(s),u(r.selectCategoryFromDropdown(T));}),n(12,"option",19),R(13,5),i(),E(14,ze,2,2,"option",20,Le),i()()()()(),n(16,"form",16)(17,"div",21,0)(19,"div",22)(20,"div",23)(21,"div",24)(22,"div",25)(23,"input",26,1),p("input",function(T){return d(s),u(r.onSearch(T));}),i(),l(25,"span",15),i(),l(26,"button",27),i(),n(27,"div",28)(28,"table",29)(29,"tbody"),E(30,qe,3,1,"tr",null,Ge),i()()(),n(32,"div",30)(33,"p"),V(34,6),l(35,"strong"),K(),i()()()()()(),n(36,"div",31),E(37,He,2,1,null,null,Ue),i();}t&2&&(a(9),m("formGroup",r.productCategoryFilter),a(5),S(r.productCategories),a(2),m("formGroup",r.productFilter),a(11),m("ngStyle",r.isWideScreenModal?j(4,Ke):j(5,Xe)),a(3),S(r.filteredProducts),a(5),X(r.filteredProducts.length),z(34),a(2),S(r.productCategories));},dependencies:[Te,me,Ee,Se,ue,he,pe,ge,Ce,Pe,L,ne,ye,$],styles:[".form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem var(--bs-light)!important;border-color:var(--bs-dark)!important}.form-select[_ngcontent-%COMP%]{background-size:20px}@media (min-width: 1600px){.col-xxxl-3[_ngcontent-%COMP%]{flex:0 0 auto;width:25%}}"],data:{animation:[_e("fadeInUp",[B("*",Q({visibility:"hidden"})),B("true",Q({visibility:"visible"})),ce("* => true",le(de))])]},changeDetection:0});}}return o;})();export{lt as ProductsComponent};/**i18n:3d8f2319017c4abf8ee0d7218c646aece062cdd8cf04f6a89f41e4db7c9d71b4*/