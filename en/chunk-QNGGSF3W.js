import{a as ye}from"./chunk-TX4UQKQ6.js";import{a as Re}from"./chunk-YILIUGRU.js";import{b as pe,c as H,d as me,e as ge,f as W,g as J,h as Ce,i as Pe,j as he,k as Ee,l as Se,m as Te,r as fe}from"./chunk-B5MZ6WME.js";import{a as de,b as ue}from"./chunk-MS4MZT6J.js";import{c as _e,f as Q,g as B,i as ce,k as le}from"./chunk-CDLJ26HW.js";import{c as ae,e as se,f as L}from"./chunk-4L2JELKA.js";import{$ as te,$a as T,Ea as N,Lb as ne,M as D,Pa as v,Pb as k,Ra as C,Sa as re,Ua as O,Va as w,Wa as E,Xa as S,Ya as s,Za as n,_a as l,aa as p,ab as V,ba as m,bb as K,cb as R,db as X,eb as z,gb as P,hb as c,i as Z,ib as oe,jb as y,kb as M,la as ie,mb as x,nb as b,ob as F,pb as f,qb as A,rb as q,ub as j,x as ee,xa as a,ya as g,yb as $}from"./chunk-QOG4PTUV.js";var Fe=["cardCarouselPage"];function Ae(r,_){if(r&1){let e=T();s(0,"div",3)(1,"button",8),P("click",function(){p(e);let i=c();return m(i.navToPrev());}),l(2,"i",9),n()();}}function Ie(r,_){if(r&1){let e=T();s(0,"div",11),P("click",function(){p(e);let i=c(2);return m(i.scrollToTop());}),s(1,"div",12)(2,"div",13),l(3,"img",14),n(),s(4,"div",15)(5,"div",16)(6,"h5",17),f(7),n()()()(),s(8,"div",18)(9,"div",19)(10,"span",20),R(11,1),n(),l(12,"i",21),n()()();}if(r&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),A(e.productName);}}function De(r,_){if(r&1&&(s(0,"section",5,0),E(2,Ie,13,5,"div",10,w),n()),r&2){let e=_.$implicit,t=c();M("id","",t.cardCarouselID,"-page-",e,""),a(2),S(t.cardsToPageMap==null?null:t.cardsToPageMap.get(e));}}function Ne(r,_){if(r&1){let e=T();s(0,"div",6)(1,"button",8),P("click",function(){p(e);let i=c();return m(i.navToNext());}),l(2,"i",22),n()();}}function we(r,_){if(r&1){let e=T();s(0,"li")(1,"label",24)(2,"input",25),P("click",function(){let i=p(e).$index,o=c(2);return m(o.navToIndex(i));}),n()()();}if(r&2){let e=_.$index,t=c(2);a(),M("for","",t.cardCarouselID,"-dotnav-",e,""),a(),M("id","",t.cardCarouselID,"-dotnav-",e,""),M("name","",t.cardCarouselID,"-dotnav-",e,""),M("value","",t.cardCarouselID,"-dotnav-",e,""),C("checked",t.currentPage==e);}}function $e(r,_){if(r&1&&(s(0,"section",7)(1,"ol",23),E(2,we,3,13,"li",null,w),n()()),r&2){let e=c();a(2),S(e.pageIndexArray);}}var ve=(()=>{class r{constructor(e,t){this.elRef=e,this.cdr=t,this.uniqueID="example",this.cardsPerPage=3,this.cards=[{productName:"test",barcode:"1234"}],this.showOnlyFullPages=!1,this.maxPageCount=0,this.cardCarouselID=void 0,this.currentPage=0,this.pageCount=0,this.touchStartX=0,this.touchEndX=0;}ngOnInit(){this.cardCarouselID=`cardCarousel-${this.uniqueID}`,this.createSliderGroups();let e=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");e.addEventListener("touchstart",t=>this.onTouchStart(t),{passive:!0}),e.addEventListener("touchend",t=>this.onTouchEnd(t),{passive:!0});}ngOnChanges(e){e.cardsPerPage&&this.createSliderGroups();}get carouselItemFlexBasis(){return`calc(100% / ${this.cardsPerPage})`;}createSliderGroups(){this.setPageCount(),this.cardsToPageMap=new Map();let e=0,t;this.pageCount>0?this.maxPageCount>0&&this.maxPageCount<this.pageCount?t=this.maxPageCount*this.cardsPerPage:t=this.pageCount*this.cardsPerPage:t=this.cards.length;for(let i=0;i<t;i+=this.cardsPerPage){let o=this.cards.slice(i,i+this.cardsPerPage);this.cardsToPageMap.set(e,o),e++;}this.pageIndexArray=Array.from(this.cardsToPageMap.keys());}setPageCount(){this.showOnlyFullPages?this.pageCount=Math.floor(this.cards.length/this.cardsPerPage):this.pageCount=Math.ceil(this.cards.length/this.cardsPerPage);}smoothScrollToPosition(e,t,i=500){let o=e.scrollLeft,d=window.getComputedStyle(e),u=parseFloat(d.getPropertyValue("scroll-padding-inline-start"))||0,I=t-u-o,h=performance.now(),Y=Oe=>{let Me=Oe-h,U=Math.min(Me/i,1),xe=U*(2-U);e.scrollLeft=o+I*xe,U<1&&requestAnimationFrame(Y);};requestAnimationFrame(Y);}navigateToGroup(e){let t=this.cardCarouselPages?.find((o,d)=>d===e)?.nativeElement,i=this.elRef.nativeElement.querySelector(".cardCarousel__scroller");t&&(i?this.smoothScrollToPosition(i,t.offsetLeft):(console.error("Failed to detected the related scroller element, so smooth scrolling is unavailable."),t.scrollIntoView({block:"nearest",inline:"nearest"})));}navToNext(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==e?(this.currentPage=0,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage+1,this.navigateToGroup(this.currentPage));}navToPrev(){let e=this.pageCount-1;this.maxPageCount>0&&this.maxPageCount<this.pageCount&&(e=this.maxPageCount-1),this.currentPage==0?(this.currentPage=e,this.navigateToGroup(this.currentPage)):(this.currentPage=this.currentPage-1,this.navigateToGroup(this.currentPage));}navToIndex(e){this.currentPage=e,this.navigateToGroup(this.currentPage);}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX;}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.handleSwipeGesture();}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX;this.pageCount>1&&(e>50&&this.currentPage>=1?this.navToPrev():e<-50&&this.navToNext(),this.cdr.markForCheck());}scrollToTop(){window.scrollTo({top:0,behavior:"instant"});}static{this.ɵfac=function(t){return new(t||r)(g(ie),g($));};}static{this.ɵcmp=N({type:r,selectors:[["app-card-carousel"]],viewQuery:function(t,i){if(t&1&&x(Fe,5),t&2){let o;b(o=F())&&(i.cardCarouselPages=o);}},hostVars:2,hostBindings:function(t,i){t&2&&re("--cardCarousel-item-basis",i.carouselItemFlexBasis);},inputs:{uniqueID:"uniqueID",cardsPerPage:"cardsPerPage",cards:"cards",showOnlyFullPages:"showOnlyFullPages",maxPageCount:"maxPageCount"},features:[te],decls:7,vars:6,consts:()=>{let e;e="productImage";let t;return t="Learn more",[["cardCarouselPage",""],t,[1,"cardCarousel",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--previous"],[1,"cardCarousel__scroller","pb-4","pt-2",3,"id"],[1,"cardCarousel__page","justify-content-center",3,"id"],[1,"cardCarousel__btn-container","cardCarousel__btn-container--next"],[1,"dotNav","d-block","col-10","col-sm-6","col-xl-4","col-xxl-3","mx-auto"],[1,"btn","h-100",2,"border","none",3,"click"],["aria-hidden","true",1,"bi","bi-chevron-left","fs-1"],[1,"card","shadow","cardCarousel__item","h-100",2,"cursor","pointer",3,"routerLink"],[1,"card","shadow","cardCarousel__item","h-100",2,"cursor","pointer",3,"click","routerLink"],[1,"row","g-0","h-100","text-center"],[1,"col-sm-4","my-auto"],["width","500","height","625","alt",e,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body","text-center"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary","w-100"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"],["aria-hidden","true",1,"bi","bi-chevron-right","fs-1"],[1,"d-flex","column-gap-4","text-center","p-0","m-0"],[3,"for"],["type","radio",3,"click","id","name","value","checked"]];},template:function(t,i){t&1&&(s(0,"div",2),v(1,Ae,3,0,"div",3),s(2,"div",4),E(3,De,4,3,"section",5,w),n(),v(5,Ne,3,0,"div",6),n(),v(6,$e,4,0,"section",7)),t&2&&(C("id",i.cardCarouselID),a(),O(i.pageCount>1&&i.currentPage!=0?1:-1),a(),y("id","",i.cardCarouselID,"-scroller"),a(),S(i.pageIndexArray),a(2),O(i.pageCount>1?5:-1),a(),O(i.pageCount>1?6:-1));},dependencies:[L,k],styles:[".cardCarousel[_ngcontent-%COMP%]{position:relative}.cardCarousel__scroller[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;overflow-x:hidden;grid-auto-columns:100%;padding:0 3.25rem;scroll-padding-inline:3.25rem;max-width:100vw}.cardCarousel__page[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;min-height:20vh}.cardCarousel__item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-basis:var(--cardCarousel-item-basis);margin:0 .25rem;min-height:100%}@media (hover: hover){.cardCarousel__item[_ngcontent-%COMP%]:hover{transform:scale(1.025);border:1px solid var(--bs-dark)}}.cardCarousel__btn-container[_ngcontent-%COMP%]{width:3rem;display:flex;justify-content:center;align-items:center;position:absolute;z-index:1}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.cardCarousel__btn-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:var(--bs-dark)}.cardCarousel__btn-container--next[_ngcontent-%COMP%]{top:0;bottom:0;right:0}.cardCarousel__btn-container--previous[_ngcontent-%COMP%]{left:0;top:0;bottom:0}ol[_ngcontent-%COMP%]{font-size:0;list-style:none}li[_ngcontent-%COMP%]{background:var(--bs-secondary-bg);border-radius:50cqh;transition:flex .5s;flex:0 auto}li[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{cursor:pointer}li[_ngcontent-%COMP%]:has(input:checked){flex:1 auto;background:var(--bs-dark)}label[_ngcontent-%COMP%]{display:inline-block;line-height:1em;min-width:1em}input[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0});}}return r;})();var ke=["productFilterModal"],Le=["productNameFilterInput"],Ge=["animateElements"],Ue=(r,_)=>["filterCategory-{{productCategory.categoryPath}}"],Ve=(r,_)=>["searchSuggestion-{{product.barcode}}"],Ke=(r,_)=>["category-{{productCategory.categoryPath}}"],Xe=(r,_)=>["productCard-{{product.barcode}}"],ze=()=>({"min-height":"40vh","max-height":"40vh"}),qe=()=>({});function je(r,_){if(r&1&&(s(0,"option",20),f(1),n()),r&2){let e=_.$implicit;oe("value",e.categoryPath),a(),A(e.categoryName);}}function Qe(r,_){if(r&1){let e=T();s(0,"tr")(1,"td",32),P("click",function(){let i=p(e).$implicit,o=c();return m(o.selectProduct(i.barcode));}),f(2),n()();}if(r&2){let e=_.$implicit;a(2),A(e.productName);}}function Be(r,_){if(r&1){let e=T();s(0,"div",null,2)(2,"h1",33),f(3),n(),l(4,"app-card-carousel",34),s(5,"div",35)(6,"button",36),P("click",function(){p(e);let i=c().$implicit,o=c();return m(o.selectCategory(i.categoryPath));}),V(7,7),l(8,"span",37),K(),n()()();}if(r&2){let e=c(),t=e.$implicit,i=e.$index,o=c();C("@fadeInUp",o.isInViewStates[i]),a(3),q(" ",t.categoryName," "),a(),C("uniqueID",t.categoryPath)("cardsPerPage",o.cardCount)("cards",o.categoryToProductsMap[t.categoryPath])("showOnlyFullPages",!1)("maxPageCount",6),a(4),X(o.categoryToProductsMap[t.categoryPath].length),z(7);}}function He(r,_){if(r&1&&(s(0,"div",39)(1,"div",40)(2,"div",41),l(3,"img",42),n(),s(4,"div",43)(5,"div",44)(6,"h5",45),f(7),n()()()(),s(8,"div",46)(9,"div",47)(10,"span",48),R(11,8),n(),l(12,"i",49),n()()()),r&2){let e=_.$implicit;y("routerLink","/product/",e.barcode,""),a(3),y("ngSrc","assets/images/products/",e.barcode,"_1.webp"),a(4),A(e.productName);}}function We(r,_){if(r&1&&(s(0,"h1",12),f(1),n(),s(2,"div",38,2),E(4,He,13,5,"div",39,Xe),n()),r&2){let e=c().$implicit,t=c();a(),q(" ",e.categoryName," "),a(),C("@fadeInUp",!0),a(2),S(t.categoryToProductsMap[e.categoryPath]);}}function Je(r,_){if(r&1&&v(0,Be,9,8,"div")(1,We,6,2),r&2){let e=_.$implicit,t=c();O(t.selectedCategory?t.selectedCategory==e.categoryPath?1:-1:0);}}var pt=(()=>{class r{constructor(e,t,i,o,d,u){this.route=e,this.router=t,this.productHandler=i,this.windowListener=o,this.cdr=d,this.SiteAnimationsService=u,this.cardCount=1,this.isWideScreenModal=!1,this.unsubscribe$=new Z(),this.selectedCategory=null,this.productCategories=[],this.products=[],this.isInViewStates=[],this.categoryToProductsMap={milled_products:[],wet_seasoning:[],aromas:[],pasta:[]},this.productFilter=new W({productName:new J("",H.required)}),this.productCategoryFilter=new W({productCategory:new J("",H.required)}),this.filteredProducts=[];}ngOnInit(){this.setCardCount(window.innerWidth),this.initProductVars(),this.windowListener.$onResize.pipe(D(this.unsubscribe$)).subscribe(e=>{this.setCardCount(e.width),this.setIsWideScreenModal(e.width),this.cdr.markForCheck();}),this.route.queryParamMap.pipe(D(this.unsubscribe$)).subscribe(e=>{let t=e.get("category");t?this.productCategories.some(o=>o.categoryPath===t)?this.selectedCategory=t:(console.error("Redirected to the default 'products' page as an invalid product category was supplied as query parameter:",t),this.router.navigate(["/products"])):this.selectedCategory=null,this.cdr.markForCheck();});}ngAfterViewInit(){if(this.productFilterModal?ee(this.productFilterModal.nativeElement,"shown.bs.modal").pipe(D(this.unsubscribe$)).subscribe(()=>{this.productNameFilterInput.nativeElement.focus();}):console.error("Failed to focus on the filter search, this.productFilterModal is",this.productFilterModal),this.animateElements){let e=this.animateElements.toArray();this.SiteAnimationsService.registerElements(e);}this.SiteAnimationsService.viewState$.subscribe(e=>{this.isInViewStates[e]=!0,this.cdr.markForCheck();});}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete();}initProductVars(){this.productCategories=this.productHandler.getProductCategories(),Object.keys(this.categoryToProductsMap).forEach(e=>{this.categoryToProductsMap[e]=this.productHandler.getProductsOfCategory(e);}),this.products=Object.values(this.categoryToProductsMap).flat();}onSearch(e){let t=e.target.value.toLowerCase();t?this.filteredProducts=this.products.filter(i=>i.productName.toLowerCase().includes(t)):this.filteredProducts=[];}selectProduct(e){this.router.navigate(["/product/",e]),this.resetFilter();}selectCategoryFromDropdown(e){let i=e.target.value;this.router.navigate(["/products"],{queryParams:i?{category:i}:{}}),window.scrollTo({top:0,behavior:"instant"});}selectCategory(e){this.router.navigate(["/products"],{queryParams:e?{category:e}:{}}),window.scrollTo({top:0,behavior:"instant"});let t=document.getElementById("productCategory");t&&(t.value=e);}setCardCount(e){e<768?this.cardCount=1:e<1200?this.cardCount=2:e<1600?this.cardCount=3:e>=1600&&(this.cardCount=4);}setIsWideScreenModal(e){this.isWideScreenModal=e>576;}resetFilter(){this.filteredProducts=[],this.productCategoryFilter.reset({productCategory:""});}static{this.ɵfac=function(t){return new(t||r)(g(ae),g(se),g(Re),g(ye),g($),g(de));};}static{this.ɵcmp=N({type:r,selectors:[["app-products"]],viewQuery:function(t,i){if(t&1&&(x(ke,5),x(Le,5),x(Ge,5)),t&2){let o;b(o=F())&&(i.productFilterModal=o.first),b(o=F())&&(i.productNameFilterInput=o.first),b(o=F())&&(i.animateElements=o);}},decls:39,vars:6,consts:()=>{let e;e="Name of the product...";let t;t="Narrow down selection";let i;i=" Search a product... ";let o;o="Product category";let d;d=""+"\uFFFD#35\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#35\uFFFD"+" results";let u;u=" All products of the category "+"\uFFFD#8\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#8\uFFFD"+"";let G;G="productImage";let I;return I="Learn more",[["productFilterModal",""],["productNameFilterInput",""],["animateElements",""],t,i,o,d,u,I,["id","productsCover",1,"diagonal-cover","diagonal-cover-start","text-center","text-light"],[1,"my-4","col-11","mx-auto"],[1,"col-11","col-sm-10","col-md-8","col-lg-6","col-xxl-4","mb-xxl-5","mx-auto"],[1,"mb-3"],[1,"position-relative"],["type","button","data-bs-toggle","modal","data-bs-target","#productFilterModal",1,"btn","btn-outline-light","w-100"],[1,"bi","bi-search","position-absolute","top-50","start-0","translate-middle-y","ms-3"],[3,"formGroup"],["id","productCategoryFilter",1,"mb-3"],["id","productCategory","aria-label","Product category filter","formControlName","productCategory","name","productCategory",1,"form-select","form-select","mb-3","text-center",3,"change"],["value","","selected",""],[3,"value"],["id","productFilterModal","data-bs-backdrop","true","data-bs-keyboard","true","tabindex","-1","aria-labelledby","productFilterModalLabel","aria-hidden","true",1,"modal"],[1,"modal-dialog","modal-fullscreen-sm-down","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"flex-grow-1","position-relative"],["id","productNameFilterInput","aria-label","Product name search","formControlName","productName","name","productNameFilterInput","placeholder",e,"autocomplete","off",1,"form-control","text-center",3,"input"],["type","button text-dark","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","p-0","overflow-y-auto",3,"ngStyle"],["id","filteredProducts",1,"table","table-hover","table-striped"],[1,"modal-footer"],[1,"col-11","col-lg-10","mx-auto"],["data-bs-dismiss","modal",3,"click"],[1,"my-4"],[3,"uniqueID","cardsPerPage","cards","showOnlyFullPages","maxPageCount"],[1,"d-block","my-5","mx-auto","text-center"],[1,"btn","btn-lg","btn-outline-dark","col-10","col-xl-6","col-xxl-5",3,"click"],[1,"badge","text-bg-dark","ms-2"],[1,"d-flex","justify-content-center","flex-wrap"],[1,"card","m-3","shadow",2,"flex","1 1 300px","min-height","200px",3,"routerLink"],[1,"row","g-0","h-100"],[1,"col-sm-4","my-auto","text-center"],["width","500","height","625","alt",G,1,"img-fluid",3,"ngSrc"],[1,"col-sm-8","my-auto"],[1,"card-body"],[1,"card-title","text-center"],[1,"card-footer","text-body-secondary","bg-body-secondary"],[1,"d-flex","justify-content-between"],[1,"me-2"],[1,"bi","bi-info-circle","ms-2"]];},template:function(t,i){if(t&1){let o=T();s(0,"div",9)(1,"h1",10),R(2,3),n(),s(3,"div",11)(4,"div",12)(5,"div",13)(6,"button",14),R(7,4),n(),l(8,"span",15),n()(),s(9,"form",16)(10,"div",17)(11,"select",18),P("change",function(u){return p(o),m(i.selectCategoryFromDropdown(u));}),s(12,"option",19),R(13,5),n(),E(14,je,2,2,"option",20,Ue),n()()()()(),s(16,"form",16)(17,"div",21,0)(19,"div",22)(20,"div",23)(21,"div",24)(22,"div",25)(23,"input",26,1),P("input",function(u){return p(o),m(i.onSearch(u));}),n(),l(25,"span",15),n(),l(26,"button",27),n(),s(27,"div",28)(28,"table",29)(29,"tbody"),E(30,Qe,3,1,"tr",null,Ve),n()()(),s(32,"div",30)(33,"p"),V(34,6),l(35,"strong"),K(),n()()()()()(),s(36,"div",31),E(37,Je,2,1,null,null,Ke),n();}t&2&&(a(9),C("formGroup",i.productCategoryFilter),a(5),S(i.productCategories),a(2),C("formGroup",i.productFilter),a(11),C("ngStyle",i.isWideScreenModal?j(4,ze):j(5,qe)),a(3),S(i.filteredProducts),a(5),X(i.filteredProducts.length),z(34),a(2),S(i.productCategories));},dependencies:[fe,Ce,Se,Te,pe,Ee,me,ge,Pe,he,L,ne,ve,k],styles:[".form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem var(--bs-light)!important;border-color:var(--bs-dark)!important}.form-select[_ngcontent-%COMP%]{background-size:20px}@media (min-width: 1600px){.col-xxxl-3[_ngcontent-%COMP%]{flex:0 0 auto;width:25%}}"],data:{animation:[_e("fadeInUp",[B("*",Q({visibility:"hidden"})),B("true",Q({visibility:"visible"})),ce("* => true",le(ue))])]},changeDetection:0});}}return r;})();export{pt as ProductsComponent};/**i18n:0a33dba5d939e6258947ccdd4e778b80a75bc1ad4f87c319dff7344efb1f42c6*/